@model AlphaWorkout.Models.ProfilePageViewModel

@{
    ViewData["Title"] = "Profile Page";
}

<h1>@ViewData["Title"]</h1>
<p>Welcome to your Profile Page, @Model.Username!</p>

<!-- Display profile picture if it exists -->
@if (!string.IsNullOrEmpty(Model.ProfilePicturePath))
{
    <img src="@Model.ProfilePicturePath" alt="Profile Picture" style="width: 150px; height: 150px; border-radius: 50%;" />
}

<!-- Form to upload profile picture -->
<h2>Upload Profile Picture</h2>
<form asp-action="UploadProfilePicture" method="post" enctype="multipart/form-data">
    <div class="form-group">
        <label for="ProfilePicture">Profile Picture:</label>
        <input type="file" class="form-control" id="ProfilePicture" name="ProfilePicture" required />
    </div>
    <button type="submit" class="btn btn-primary">Upload</button>
</form>

<!-- Add the Onboarding button -->
<a class="btn btn-primary" asp-controller="Onboarding" asp-action="Index">Complete Onboarding</a>

<!-- Display the onboarding data in a table -->
@if (Model.FitnessGoals != null)
{
    <h2>Your Onboarding Information</h2>
    <table class="table table-striped">
        <thead>
            <tr>
                <th>Category</th>
                <th>Information</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td>Fitness Goals</td>
                <td>@Model.FitnessGoals</td>
            </tr>
            <tr>
                <td>Demographics</td>
                <td>@Model.Demographics</td>
            </tr>
            <tr>
                <td>Fitness Level</td>
                <td>@Model.FitnessLevel</td>
            </tr>
            <tr>
                <td>Exercise Preferences</td>
                <td>@Model.ExercisePreferences</td>
            </tr>
            <tr>
                <td>Past Injury</td>
                <td>@Model.PastInjury</td>
            </tr>
        </tbody>
    </table>
}

<!-- Add weight entry form -->
<h2>Track Your Weight</h2>
<form asp-action="AddWeight" method="post">
    <div class="form-group">
        <label for="weight">Weight (kg):</label>
        <input type="number" step="0.01" class="form-control" id="weight" name="weight" required />
    </div>
    <button type="submit" class="btn btn-primary">Add Weight</button>
</form>

<!-- Display weight entries -->
@if (Model.WeightEntries != null && Model.WeightEntries.Any())
{
    <h3>Your Weight Entries</h3>
    <table class="table table-striped">
        <thead>
            <tr>
                <th>Date</th>
                <th>Weight (kg)</th>
            </tr>
        </thead>
        <tbody>
            @foreach (var entry in Model.WeightEntries)
            {
                <tr>
                    <td>@entry.Date.ToString("g")</td>
                    <td>@entry.Weight</td>
                </tr>
            }
        </tbody>
    </table>
    @if (Model.WeightChange != null)
    {
        <p><strong>Weight Change Since Last Entry:</strong> @Model.WeightChange</p>
    }
}

<!-- Button to generate workout plan -->
<h2>Generate Workout Plan</h2>
<form asp-action="GenerateWorkoutPlan" method="post">
    <button type="submit" class="btn btn-primary">Generate Workout Plan</button>
</form>

<!-- Display the workout plan -->
@if (Model.WorkoutPlan != null)
{
    <h3>Your Workout Plan</h3>
    <table class="table table-striped">
        <thead>
            <tr>
                <th>Day</th>
                <th>Exercise</th>
            </tr>
        </thead>
        <tbody>
            @foreach (var entry in Model.WorkoutPlan)
            {
                <tr>
                    <td>@entry.Key</td>
                    <td>@entry.Value</td>
                </tr>
            }
        </tbody>
    </table>
}
